version: '3.8'

services:
  backend:
    build:
      context: ./backend
      dockerfile: Dockerfile
    container_name: audit-api-service
    ports:
      - "5000:5000" # Mapea el puerto interno 5000 al 5000 externo
    volumes:
      - ./backend/src:/usr/src/app/backend/src # Sincronizaci√≥n en desarrollo
      - ./backend/data.json:/usr/src/app/backend/data.json # Persistencia del "DB"
    command: npm run dev # Usaremos nodemon o similar para desarrollo local
    environment:
      NODE_ENV: development
      PORT: 5000

  frontend:
    build:
      context: ./frontend
      dockerfile: Dockerfile
    container_name: audit-web-app
    ports:
      - "3000:3000" # Mapea el puerto interno 3000 al 3000 externo
    volumes:
      - ./frontend/src:/app/src
    depends_on:
      - backend
    environment:
      # URL INTERNA de la API (compatible con Docker y la nube)
      VITE_API_URL: http://backend:5000
